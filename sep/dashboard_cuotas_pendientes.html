<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashboard – Cuotas pendientes (USD)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f1419;
      --card: #1a2332;
      --text: #e6edf3;
      --muted: #8b949e;
      --accent: #58a6ff;
      --green: #3fb950;
      --yellow: #d29922;
      --orange: #db6d28;
      --red: #f85149;
      --border: rgba(255,255,255,0.08);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 2rem;
    }
    .container { max-width: 1200px; margin: 0 auto; }
    .header { display: flex; align-items: flex-end; justify-content: space-between; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.25rem; }
    h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    .subtitle { color: var(--muted); font-size: 0.95rem; }
    .meta { color: var(--muted); font-size: 0.85rem; text-align: right; }
    .cards {
      display: grid;
      grid-template-columns: repeat(4, minmax(180px, 1fr));
      gap: 1rem;
      margin: 1.25rem 0 1.5rem;
    }
    .card {
      background: var(--card);
      border-radius: 12px;
      padding: 1.25rem;
      border: 1px solid var(--border);
    }
    .card .label { color: var(--muted); font-size: 0.8rem; margin-bottom: 0.35rem; }
    .card .value { font-size: 1.75rem; font-weight: 700; }
    .card .monto { font-size: 0.85rem; color: var(--muted); margin-top: 0.25rem; }
    .grid-2 { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 1rem; align-items: start; }
    .panel {
      background: var(--card);
      border-radius: 12px;
      padding: 1.25rem;
      border: 1px solid var(--border);
    }
    .panel h2 { font-size: 1rem; margin-bottom: 0.9rem; color: var(--text); font-weight: 700; }
    .panel .hint { color: var(--muted); font-size: 0.85rem; margin-top: -0.5rem; margin-bottom: 1rem; }
    .bar-row { margin-bottom: 1rem; }
    .bar-row .flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.35rem; }
    .bar-row .flex span:first-child { font-size: 0.9rem; }
    .bar-row .flex span:last-child { font-weight: 600; }
    .bar-bg { height: 24px; background: rgba(255,255,255,0.06); border-radius: 6px; overflow: hidden; }
    .bar-fill { height: 100%; border-radius: 6px; transition: width 0.5s ease; }
    .bar-fill.r1 { background: linear-gradient(90deg, #238636, #3fb950); }
    .bar-fill.r2 { background: linear-gradient(90deg, #9e6a03, #d29922); }
    .bar-fill.r3 { background: linear-gradient(90deg, #bc4c00, #db6d28); }
    .bar-fill.r4 { background: linear-gradient(90deg, #da3633, #f85149); }
    .bar-fill.r5 { background: linear-gradient(90deg, #8b2c2c, #da3633); }
    table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
    th, td { padding: 0.6rem 0.5rem; border-bottom: 1px solid rgba(255,255,255,0.08); }
    th { text-align: left; color: var(--muted); font-size: 0.8rem; font-weight: 600; }
    td.num { text-align: right; font-variant-numeric: tabular-nums; }
    .pill { display: inline-block; padding: 0.2rem 0.5rem; border-radius: 999px; background: rgba(88,166,255,0.12); color: #9cc7ff; font-size: 0.75rem; }
    .footer { margin-top: 1.25rem; font-size: 0.8rem; color: var(--muted); }
    @media (max-width: 980px) {
      .cards { grid-template-columns: repeat(2, minmax(160px, 1fr)); }
      .grid-2 { grid-template-columns: 1fr; }
      .meta { text-align: left; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1>Cuotas pendientes por rango de días</h1>
        <p class="subtitle">Socios y cuotas en mora según antigüedad · <span class="pill">Moneda: USD</span></p>
      </div>
      <div class="meta">
        <div>Fuente: <strong>RECUPERACION_DE_MORA.csv</strong></div>
      </div>
    </div>

  <div class="cards">
    <div class="card">
      <div class="label">Socios con mora (únicos)</div>
      <div class="value">2,242</div>
      <div class="monto">en el dataset</div>
    </div>
    <div class="card">
      <div class="label">Cuotas pendientes (filas)</div>
      <div class="value">22,718</div>
      <div class="monto">cuotas en mora</div>
    </div>
    <div class="card">
      <div class="label">Monto total en mora</div>
      <div class="value">561,743.83</div>
      <div class="monto">USD</div>
    </div>
    <div class="card">
      <div class="label">Rangos</div>
      <div class="value">5</div>
      <div class="monto">segmentos de antigüedad</div>
    </div>
  </div>

  <div class="grid-2">
    <div class="panel">
      <h2>Distribución por rango (socios y monto)</h2>
      <div class="hint">Barras: ancho por # de socios · Porcentaje: sobre total de socios / monto</div>

      <div class="bar-row">
        <div class="flex">
          <span><strong>1-30 días</strong> · 6 cuotas · 123.25 USD</span>
          <span>3 socios · 0.1%</span>
        </div>
        <div class="bar-bg"><div class="bar-fill r1" style="width:0%"></div></div>
        <div style="display:flex; justify-content:space-between; color:var(--muted); font-size:0.8rem; margin-top:0.25rem;">
          <span>Monto: 0.0%</span>
          <span>Intensidad (monto): 0%</span>
        </div>
      </div>

      <div class="bar-row">
        <div class="flex">
          <span><strong>31-60 días</strong> · 5 cuotas · 106.30 USD</span>
          <span>2 socios · 0.1%</span>
        </div>
        <div class="bar-bg"><div class="bar-fill r2" style="width:0%"></div></div>
        <div style="display:flex; justify-content:space-between; color:var(--muted); font-size:0.8rem; margin-top:0.25rem;">
          <span>Monto: 0.0%</span>
          <span>Intensidad (monto): 0%</span>
        </div>
      </div>

      <div class="bar-row">
        <div class="flex">
          <span><strong>61-90 días</strong> · 11 cuotas · 321.82 USD</span>
          <span>9 socios · 0.4%</span>
        </div>
        <div class="bar-bg"><div class="bar-fill r3" style="width:0%"></div></div>
        <div style="display:flex; justify-content:space-between; color:var(--muted); font-size:0.8rem; margin-top:0.25rem;">
          <span>Monto: 0.1%</span>
          <span>Intensidad (monto): 0%</span>
        </div>
      </div>

      <div class="bar-row">
        <div class="flex">
          <span><strong>91-120 días</strong> · 11 cuotas · 251.10 USD</span>
          <span>9 socios · 0.4%</span>
        </div>
        <div class="bar-bg"><div class="bar-fill r4" style="width:0%"></div></div>
        <div style="display:flex; justify-content:space-between; color:var(--muted); font-size:0.8rem; margin-top:0.25rem;">
          <span>Monto: 0.0%</span>
          <span>Intensidad (monto): 0%</span>
        </div>
      </div>

      <div class="bar-row">
        <div class="flex">
          <span><strong>Más de 121 días</strong> · 22,685 cuotas · 560,941.36 USD</span>
          <span>2,238 socios · 99.8%</span>
        </div>
        <div class="bar-bg"><div class="bar-fill r5" style="width:100%"></div></div>
        <div style="display:flex; justify-content:space-between; color:var(--muted); font-size:0.8rem; margin-top:0.25rem;">
          <span>Monto: 99.9%</span>
          <span>Intensidad (monto): 100%</span>
        </div>
      </div>

      <h2 style="margin-top:1.25rem;">Tabla resumen</h2>
      <table>
        <thead>
          <tr>
            <th>Rango</th>
            <th class="num">Socios</th>
            <th class="num">Cuotas</th>
            <th class="num">Monto (USD)</th>
            <th class="num">% Socios</th>
            <th class="num">% Monto</th>
          </tr>
        </thead>
        <tbody>

          <tr>
            <td>1-30 días</td>
            <td class="num">3</td>
            <td class="num">6</td>
            <td class="num">123.25</td>
            <td class="num">0.1%</td>
            <td class="num">0.0%</td>
          </tr>

          <tr>
            <td>31-60 días</td>
            <td class="num">2</td>
            <td class="num">5</td>
            <td class="num">106.30</td>
            <td class="num">0.1%</td>
            <td class="num">0.0%</td>
          </tr>

          <tr>
            <td>61-90 días</td>
            <td class="num">9</td>
            <td class="num">11</td>
            <td class="num">321.82</td>
            <td class="num">0.4%</td>
            <td class="num">0.1%</td>
          </tr>

          <tr>
            <td>91-120 días</td>
            <td class="num">9</td>
            <td class="num">11</td>
            <td class="num">251.10</td>
            <td class="num">0.4%</td>
            <td class="num">0.0%</td>
          </tr>

          <tr>
            <td>Más de 121 días</td>
            <td class="num">2,238</td>
            <td class="num">22,685</td>
            <td class="num">560,941.36</td>
            <td class="num">99.8%</td>
            <td class="num">99.9%</td>
          </tr>

        </tbody>
      </table>
    </div>

    <div class="panel">
      <h2>Top socios por monto en mora</h2>
      <div class="hint">Top 15 por monto total (suma de cuotas pendientes)</div>
      <table>
        <thead>
          <tr>
            <th>Socio</th>
            <th class="num">Monto (USD)</th>
            <th class="num">Últ. fecha</th>
          </tr>
        </thead>
        <tbody>

          <tr>
            <td>6297</td>
            <td class="num">962.50</td>
            <td class="num">2024-05-01</td>
          </tr>

          <tr>
            <td>6312</td>
            <td class="num">962.50</td>
            <td class="num">2021-12-01</td>
          </tr>

          <tr>
            <td>6354</td>
            <td class="num">962.50</td>
            <td class="num">2022-05-01</td>
          </tr>

          <tr>
            <td>4611</td>
            <td class="num">962.50</td>
            <td class="num">2021-12-01</td>
          </tr>

          <tr>
            <td>4905</td>
            <td class="num">962.50</td>
            <td class="num">2021-02-01</td>
          </tr>

          <tr>
            <td>4907</td>
            <td class="num">962.50</td>
            <td class="num">2021-02-01</td>
          </tr>

          <tr>
            <td>4604</td>
            <td class="num">962.50</td>
            <td class="num">2021-12-01</td>
          </tr>

          <tr>
            <td>5663</td>
            <td class="num">962.50</td>
            <td class="num">2023-08-01</td>
          </tr>

          <tr>
            <td>5710</td>
            <td class="num">962.50</td>
            <td class="num">2023-01-01</td>
          </tr>

          <tr>
            <td>6006</td>
            <td class="num">962.50</td>
            <td class="num">2023-09-01</td>
          </tr>

          <tr>
            <td>5709</td>
            <td class="num">962.50</td>
            <td class="num">2024-01-01</td>
          </tr>

          <tr>
            <td>5951</td>
            <td class="num">962.50</td>
            <td class="num">2023-07-01</td>
          </tr>

          <tr>
            <td>6519</td>
            <td class="num">962.50</td>
            <td class="num">2025-04-01</td>
          </tr>

          <tr>
            <td>4669</td>
            <td class="num">962.50</td>
            <td class="num">2021-12-01</td>
          </tr>

          <tr>
            <td>4931</td>
            <td class="num">962.50</td>
            <td class="num">2024-05-01</td>
          </tr>

        </tbody>
      </table>
    </div>
  </div>

  <p class="footer">Generado con <code>build_dashboard.py</code> · Fuente: <code>RECUPERACION_DE_MORA.csv</code> · Moneda: USD</p>
  </div>
</body>
</html>
